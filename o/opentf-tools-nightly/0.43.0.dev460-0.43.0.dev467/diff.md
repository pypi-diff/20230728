# Comparing `tmp/opentf_tools_nightly-0.43.0.dev460-py3-none-any.whl.zip` & `tmp/opentf_tools_nightly-0.43.0.dev467-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,16 +1,16 @@
-Zip file size: 39959 bytes, number of entries: 14
--rw-r--r--  2.0 unx    23214 b- defN 23-Jul-27 16:27 opentf/tools/ctl.py
--rw-r--r--  2.0 unx     9256 b- defN 23-Jul-27 16:27 opentf/tools/ctlcommons.py
--rw-r--r--  2.0 unx    29452 b- defN 23-Jul-27 16:27 opentf/tools/ctlconfig.py
--rw-r--r--  2.0 unx     8878 b- defN 23-Jul-27 16:27 opentf/tools/ctlnetworking.py
--rw-r--r--  2.0 unx    12377 b- defN 23-Jul-27 16:27 opentf/tools/ctlqualitygate.py
--rw-r--r--  2.0 unx    28573 b- defN 23-Jul-27 16:27 opentf/tools/ctlworkflows.py
--rw-r--r--  2.0 unx     3188 b- defN 23-Jul-27 16:27 opentf/tools/done.py
--rw-r--r--  2.0 unx     9391 b- defN 23-Jul-27 16:27 opentf/tools/ready.py
--rw-rw-rw-  2.0 unx    11357 b- defN 23-Jul-27 16:27 opentf_tools_nightly-0.43.0.dev460.dist-info/LICENSE
--rw-r--r--  2.0 unx     1808 b- defN 23-Jul-27 16:27 opentf_tools_nightly-0.43.0.dev460.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jul-27 16:27 opentf_tools_nightly-0.43.0.dev460.dist-info/WHEEL
--rw-r--r--  2.0 unx      139 b- defN 23-Jul-27 16:27 opentf_tools_nightly-0.43.0.dev460.dist-info/entry_points.txt
--rw-r--r--  2.0 unx        7 b- defN 23-Jul-27 16:27 opentf_tools_nightly-0.43.0.dev460.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1266 b- defN 23-Jul-27 16:27 opentf_tools_nightly-0.43.0.dev460.dist-info/RECORD
-14 files, 138998 bytes uncompressed, 37827 bytes compressed:  72.8%
+Zip file size: 39882 bytes, number of entries: 14
+-rw-r--r--  2.0 unx    23214 b- defN 23-Jul-28 14:27 opentf/tools/ctl.py
+-rw-r--r--  2.0 unx    10308 b- defN 23-Jul-28 14:27 opentf/tools/ctlcommons.py
+-rw-r--r--  2.0 unx    29452 b- defN 23-Jul-28 14:27 opentf/tools/ctlconfig.py
+-rw-r--r--  2.0 unx     8878 b- defN 23-Jul-28 14:27 opentf/tools/ctlnetworking.py
+-rw-r--r--  2.0 unx    11448 b- defN 23-Jul-28 14:27 opentf/tools/ctlqualitygate.py
+-rw-r--r--  2.0 unx    28093 b- defN 23-Jul-28 14:27 opentf/tools/ctlworkflows.py
+-rw-r--r--  2.0 unx     3188 b- defN 23-Jul-28 14:27 opentf/tools/done.py
+-rw-r--r--  2.0 unx     9391 b- defN 23-Jul-28 14:27 opentf/tools/ready.py
+-rw-rw-rw-  2.0 unx    11357 b- defN 23-Jul-28 14:27 opentf_tools_nightly-0.43.0.dev467.dist-info/LICENSE
+-rw-r--r--  2.0 unx     1808 b- defN 23-Jul-28 14:27 opentf_tools_nightly-0.43.0.dev467.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-28 14:27 opentf_tools_nightly-0.43.0.dev467.dist-info/WHEEL
+-rw-r--r--  2.0 unx      139 b- defN 23-Jul-28 14:27 opentf_tools_nightly-0.43.0.dev467.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx        7 b- defN 23-Jul-28 14:27 opentf_tools_nightly-0.43.0.dev467.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1267 b- defN 23-Jul-28 14:27 opentf_tools_nightly-0.43.0.dev467.dist-info/RECORD
+14 files, 138642 bytes uncompressed, 37750 bytes compressed:  72.8%
```

## zipnote {}

```diff
@@ -18,26 +18,26 @@
 
 Filename: opentf/tools/done.py
 Comment: 
 
 Filename: opentf/tools/ready.py
 Comment: 
 
-Filename: opentf_tools_nightly-0.43.0.dev460.dist-info/LICENSE
+Filename: opentf_tools_nightly-0.43.0.dev467.dist-info/LICENSE
 Comment: 
 
-Filename: opentf_tools_nightly-0.43.0.dev460.dist-info/METADATA
+Filename: opentf_tools_nightly-0.43.0.dev467.dist-info/METADATA
 Comment: 
 
-Filename: opentf_tools_nightly-0.43.0.dev460.dist-info/WHEEL
+Filename: opentf_tools_nightly-0.43.0.dev467.dist-info/WHEEL
 Comment: 
 
-Filename: opentf_tools_nightly-0.43.0.dev460.dist-info/entry_points.txt
+Filename: opentf_tools_nightly-0.43.0.dev467.dist-info/entry_points.txt
 Comment: 
 
-Filename: opentf_tools_nightly-0.43.0.dev460.dist-info/top_level.txt
+Filename: opentf_tools_nightly-0.43.0.dev467.dist-info/top_level.txt
 Comment: 
 
-Filename: opentf_tools_nightly-0.43.0.dev460.dist-info/RECORD
+Filename: opentf_tools_nightly-0.43.0.dev467.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## opentf/tools/ctlcommons.py

```diff
@@ -12,15 +12,14 @@
 # See the License for the specific language governing permissions and
 # limitations under the License.
 
 """opentf-ctl commons"""
 
 from typing import Any, Dict, Iterable, List, Optional
 
-import csv
 import json
 import logging
 import re
 import sys
 
 import yaml
 
@@ -217,34 +216,51 @@
             )
         return ccs
     if _get_arg('custom-columns='):
         raise ValueError('Missing "-o" parameter (found lone "custom-columns=")')
     return default
 
 
+def _get_jsonpath(data: Any, path: List[str]) -> Any:
+    """Return data at path in data."""
+    if not path:
+        return data
+    field, path = path[0], path[1:]
+    if field == '*' and isinstance(data, dict):
+        result = list(filter(None, (_get_jsonpath(val, path) for val in data.values())))
+        if '*' in path or '*~' in path:
+            return [y for x in result for y in x]
+        return result
+    if field == '*~' and isinstance(data, dict):
+        return list(filter(None, data))
+    if isinstance(data, dict):
+        return _get_jsonpath(data.get(field), path)
+    if field == '*' and isinstance(data, list):
+        result = list(filter(None, (_get_jsonpath(val, path) for val in data)))
+        if '*' in path or '*~' in path:
+            return [y for x in result for y in x]
+        return result
+    return None
+
+
 def _generate_row(manifest: Dict[str, Any], columns: Iterable[str]) -> List[str]:
     row = []
     for item in columns:
         fields = item.split(':')[1].lstrip('.').split('.')
-        value = manifest
-        for field in fields:
-            if field == '*' and isinstance(value, dict):
-                value = list(value.values())
-            else:
-                value = value.get(field)
-                if value is None:
-                    break
-        if isinstance(value, dict):
-            value = str(value)
-        elif isinstance(value, (list, set)):
-            value = ':'.join(value)
+        if '*~' in fields and fields.index('*~') != len(fields) - 1:
+            _error(
+                'Invalid column specification: "*~", if used, must be last in path in "%s".',
+                item,
+            )
+            sys.exit(2)
+        value = _get_jsonpath(manifest, fields)
+        if isinstance(value, (dict, list)):
+            value = json.dumps(value)
         elif value is None:
             value = '<none>'
-        elif isinstance(value, str) and field == 'namespaces':
-            value = ':'.join(value.split(','))
         row.append(str(value))
     return row
 
 
 def _emit_output(
     data: Iterable[Dict[str, Any]],
     default: Iterable[str],
@@ -276,18 +292,28 @@
     """Generate csv.
 
     `data` is an iterable.  `columns` is a columns specification
     ('title:path').
 
     `file` is optional, and is `sys.stdout` by default.
     """
-    writer = csv.writer(file)
-    writer.writerow(path.split(':')[0] for path in columns)
+    data = list(data)
+    widths = [len(path.split(':')[0]) for path in columns]
+    for row in data:
+        for idx, item in enumerate(row):
+            widths[idx] = max(widths[idx], len(item))
+    for idx, item in enumerate(columns):
+        width = widths[idx] + 2
+        print(item.split(':')[0].ljust(width), end='', file=file)
+    print()
     for row in data:
-        writer.writerow(row)
+        for idx, item in enumerate(row):
+            width = widths[idx] + 2
+            print(item.ljust(width), end='', file=file)
+        print()
 
 
 # misc. helpers
 
 
 def _ensure_uuid(parameter: str) -> None:
     """Ensure parameter is a valid UUID.
```

## opentf/tools/ctlqualitygate.py

```diff
@@ -16,21 +16,21 @@
 
 import sys
 
 from opentf.tools.ctlcommons import (
     _ensure_options,
     _is_command,
     _get_arg,
-    _emit_csv,
+    _emit_output,
     _ensure_uuid,
     _error,
     _warning,
     _debug,
 )
-from opentf.tools.ctlworkflows import _retrieve_columns_to_display, _file_not_found
+from opentf.tools.ctlworkflows import _file_not_found
 from opentf.tools.ctlconfig import read_configuration
 from opentf.tools.ctlnetworking import (
     _qualitygate,
     _get_json,
     _post,
 )
 
@@ -43,15 +43,15 @@
   # Get the quality gate status of a workflow applying the specific quality gate from the definition file
   opentf-ctl get qualitygate 9ea3be45-ee90-4135-b47f-e66e4f793383 --using=my.qualitygate.yaml --mode=my.quality.gate
 
   # Get the quality gate status of a workflow applying the default strict quality gate (threshold=100%)
   opentf-ctl get qualitygate 9ea3be45-ee90-4135-b47f-e66e4f793383
 
   # Get the quality gate status of a workflow applying a specific quality gate showing scope and ratio only
-  opentf-ctl get qualitygate a13f0572-b23b-40bc-a6eb-a12429f0143c --mode custom.quality.gate -o custom-columns=RULE_SCOPE:rule.scope,RATIO:rule.success_ratio
+  opentf-ctl get qualitygate a13f0572-b23b-40bc-a6eb-a12429f0143c --mode custom.quality.gate -o custom-columns=RULE_SCOPE:.rule.scope,RATIO:.rule.success_ratio
 
 Options:
   --mode=my.quality.gate|strict|passing|... or -m=...: use the specific quality gate from the definition file
   or one of the default quality gates (strict with 100% threshold and passing with 0% threshold)
   --using=/path/to/definition.yaml: use the specific quality gate definition file.
   --output=wide or -o wide: show additional information (rule threshold and scope).
   --output=custom-columns= or -o custom-columns=: show specified information.
@@ -153,41 +153,14 @@
     status: str, workflow_id: str, mode: str, rule: str, scope: Optional[str]
 ) -> str:
     return STATUS_TEMPLATES[status].format(
         workflow_id=workflow_id, mode=mode, rule=rule, scope=scope
     )
 
 
-def _make_rule_row(name: str, data: Dict[str, Any], fields: List[str]) -> List[str]:
-    if data['result'] not in (SUCCESS, NOTEST, FAILURE, INVALIDSCOPE):
-        _fatal(
-            f'Unexpected quality gate result when applying rule `{name}`: {data["result"]} (was expecting {", ".join(STATUS_TEMPLATES)}).'
-        )
-    row = []
-    for field in fields:
-        field = field.lstrip('.')
-        if field in ('rule', 'rule.name'):
-            row.append(name)
-        elif field.startswith('rule.') and data:
-            row.append(data.get(field.split('.')[1], ''))
-        else:
-            row.append('')
-    return row
-
-
-def _generate_qualitygate_rows(
-    status: Dict[str, Any], columns: Iterable[str]
-) -> List[List[Any]]:
-    """Generate rows with quality gate results."""
-    fields = [column.split(':')[1] for column in columns]
-    return [
-        _make_rule_row(name, definition, fields) for name, definition in status.items()
-    ]
-
-
 def _process_qualitygate_result(
     result: Dict[str, Any], workflow_id: str
 ) -> Dict[str, Any]:
     if result.get('code') == 404:
         _fatal(
             'Unknown workflow %s.  It is either too new, too old, or the provided '
             + 'workflow ID is incorrect.  You can use "opentf-ctl get workflows" to list '
@@ -290,16 +263,19 @@
         for rule_name, rule in rules.items():
             if rule['result'] == INVALIDSCOPE:
                 _error(f'Error in rule `{rule_name}`. {rule["message"]}')
 
         if describe:
             _describe_qualitygate(workflow_id, mode, rules)
         else:
-            columns = _retrieve_columns_to_display(WIDE_COLUMNS, DEFAULT_COLUMNS)
-            _emit_csv(_generate_qualitygate_rows(rules, columns), columns)
+            data = [
+                {'rule': {'name': name, **definition}}
+                for name, definition in rules.items()
+            ]
+            _emit_output(data, DEFAULT_COLUMNS, WIDE_COLUMNS)
 
     _print_final_status(workflow_id, mode, status)
 
 
 ########################################################################
 # Helpers
```

## opentf/tools/ctlworkflows.py

```diff
@@ -51,20 +51,20 @@
 
 ########################################################################
 
 # pylint: disable=broad-except
 
 DEFAULT_COLUMNS = (
     'WORKFLOW_ID:.metadata.workflow_id',
-    'STATUS:.details.status',
+    'STATUS:.status.phase',
     'NAME:.metadata.name',
 )
 WIDE_COLUMNS = (
     'WORKFLOW_ID:.metadata.workflow_id',
-    'STATUS:.details.status',
+    'STATUS:.status.phase',
     'FIRST_SEEN_TIMESTAMP:.metadata.creationTimestamp',
     'NAME:.metadata.name',
 )
 
 
 WATCHED_EVENTS = (
     'ExecutionCommand',
@@ -286,15 +286,15 @@
 
 def _get_manifests(workflows_ids) -> Iterable[Dict[str, Any]]:
     for workflow_id in workflows_ids:
         response = _get_first_page(workflow_id)
         if response.status_code == 200:
             wf = _get_workflow_manifest(response.json()['details']['items'])
             if wf:
-                wf['details'] = {'status': response.json()['details']['status']}
+                wf['status'] = {'phase': response.json()['details']['status']}
             yield wf
         else:
             print(workflow_id, 'got response code', response.status_code)
 
 
 def _handler_maybe_outdated(response) -> NoReturn:
     if response.status_code in (404, 405):
@@ -304,28 +304,14 @@
         _error(
             'Could not get workflows list.  Return code was %d.',
             response.status_code,
         )
     sys.exit(2)
 
 
-def _retrieve_columns_to_display(
-    wide_columns: tuple, default_columns: tuple
-) -> Iterable[str]:
-    """Safely retrieve columns to display when listing workflow or quality gate results."""
-    try:
-        return _get_columns(wide_columns, default_columns)
-    except ValueError as err:
-        _error('Invalid parameters: %s.', err)
-        sys.exit(2)
-    except Exception as err:
-        _error('Could not get columns specification: %s.', err)
-        sys.exit(2)
-
-
 def list_workflows() -> None:
     """List active and recent workflows."""
     response = _get_json(
         _observer(),
         '/workflows',
         'Could not get workflows list',
         handler=_handler_maybe_outdated,
```

## Comparing `opentf_tools_nightly-0.43.0.dev460.dist-info/LICENSE` & `opentf_tools_nightly-0.43.0.dev467.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `opentf_tools_nightly-0.43.0.dev460.dist-info/METADATA` & `opentf_tools_nightly-0.43.0.dev467.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: opentf-tools-nightly
-Version: 0.43.0.dev460
+Version: 0.43.0.dev467
 Summary: OpenTestFactory Orchestrator Tools
 Home-page: https://opentestfactory.org/tools/
 Author: Martin Lafaix
 Author-email: mlafaix@henix.com
 Maintainer: Henix
 Maintainer-email: opentestfactory@henix.com
 License: Apache Software License (https://www.apache.org/licenses/LICENSE-2.0)
```

## Comparing `opentf_tools_nightly-0.43.0.dev460.dist-info/RECORD` & `opentf_tools_nightly-0.43.0.dev467.dist-info/RECORD`

 * *Files 18% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 opentf/tools/ctl.py,sha256=L0FUp9FCx9ISYunmw1pWtJb9U2vWs28VEjMsqZv7HSU,23214
-opentf/tools/ctlcommons.py,sha256=hWmQLwq7c1-TEwVtlf127uW9yFap_of6VKqVskThhmQ,9256
+opentf/tools/ctlcommons.py,sha256=IxCGVNnXsD66WMliplwGuvTMDY7c2Kc-WjWiT_Zd0Xg,10308
 opentf/tools/ctlconfig.py,sha256=dWY0RHgpa7GeC1GMMBniUctuCQKrnXyY-AcNm5xhrNQ,29452
 opentf/tools/ctlnetworking.py,sha256=NO_U5VZ49w5vEcbOzX7cjXFY8ygsOb6NaoEgj4U1oW0,8878
-opentf/tools/ctlqualitygate.py,sha256=TL9-fL1BIUX9Zqjb-0EbCgIuu_6V4uv9_tkBfU1hz90,12377
-opentf/tools/ctlworkflows.py,sha256=DW6e3SnDcH4G1JPAhd1aO8kK5qJYN-_aZurKLQtHsX0,28573
+opentf/tools/ctlqualitygate.py,sha256=JnfH1k0jQeX2Jsltg1nMn1o3FkY9c1tV2wiNz2P2DHs,11448
+opentf/tools/ctlworkflows.py,sha256=80W5NnZDFmrvQ136kxG6KsgSAC3vI9M0PXFNSSGrpUE,28093
 opentf/tools/done.py,sha256=1X5s9IjpphD0LZvcQ0h36mKHkbLjjYDzlqqwat6kKdE,3188
 opentf/tools/ready.py,sha256=WHPdnWCMOKLCxLlF0FTCCpW-8y0BF7rrGCl7H2AJ-DM,9391
-opentf_tools_nightly-0.43.0.dev460.dist-info/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
-opentf_tools_nightly-0.43.0.dev460.dist-info/METADATA,sha256=bwENIS-vT8PjR3iBn7AI-CtEN3rqCfc7EfQu5vU1bwg,1808
-opentf_tools_nightly-0.43.0.dev460.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-opentf_tools_nightly-0.43.0.dev460.dist-info/entry_points.txt,sha256=u5qYtmUbgIMcq8360YobnI9CtDvrjptf4lDkmKojoa0,139
-opentf_tools_nightly-0.43.0.dev460.dist-info/top_level.txt,sha256=_gPuE6GTT6UNXy1DjtmQSfCcZb_qYA2vWmjg7a30AGk,7
-opentf_tools_nightly-0.43.0.dev460.dist-info/RECORD,,
+opentf_tools_nightly-0.43.0.dev467.dist-info/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
+opentf_tools_nightly-0.43.0.dev467.dist-info/METADATA,sha256=HawL6aoayvkmVCYOw4R6VwtFiRryDCNbKBIZI131Gxo,1808
+opentf_tools_nightly-0.43.0.dev467.dist-info/WHEEL,sha256=AtBG6SXL3KF_v0NxLf0ehyVOh0cold-JbJYXNGorC6Q,92
+opentf_tools_nightly-0.43.0.dev467.dist-info/entry_points.txt,sha256=u5qYtmUbgIMcq8360YobnI9CtDvrjptf4lDkmKojoa0,139
+opentf_tools_nightly-0.43.0.dev467.dist-info/top_level.txt,sha256=_gPuE6GTT6UNXy1DjtmQSfCcZb_qYA2vWmjg7a30AGk,7
+opentf_tools_nightly-0.43.0.dev467.dist-info/RECORD,,
```

