# Comparing `tmp/morm-1.5.1-py3-none-any.whl.zip` & `tmp/morm-1.5.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,25 +1,25 @@
-Zip file size: 43231 bytes, number of entries: 23
+Zip file size: 43685 bytes, number of entries: 23
 -rw-r--r--  2.0 unx       50 b- defN 21-Apr-08 08:46 morm/__init__.py
--rw-r--r--  2.0 unx     1943 b- defN 23-Jul-27 10:39 morm/admin.py
+-rw-r--r--  2.0 unx     3239 b- defN 23-Jul-28 04:55 morm/admin.py
 -rw-r--r--  2.0 unx      636 b- defN 21-Apr-08 08:54 morm/datetime.py
 -rw-r--r--  2.0 unx    37130 b- defN 21-Apr-15 13:20 morm/db.py
 -rw-r--r--  2.0 unx      470 b- defN 21-Apr-08 08:46 morm/exceptions.py
 -rw-r--r--  2.0 unx     2915 b- defN 21-Apr-08 08:46 morm/meta.py
 -rw-r--r--  2.0 unx    22039 b- defN 21-Jul-21 14:32 morm/migration.py
 -rw-r--r--  2.0 unx    20820 b- defN 21-Jul-21 14:32 morm/model.py
 -rw-r--r--  2.0 unx     1015 b- defN 21-Apr-08 08:54 morm/pg_models.py
 -rw-r--r--  2.0 unx      681 b- defN 21-Apr-08 08:46 morm/q.py
 -rw-r--r--  2.0 unx     2097 b- defN 21-Apr-08 08:46 morm/types.py
 -rw-r--r--  2.0 unx      960 b- defN 21-Jul-21 14:59 morm/utils.py
--rw-r--r--  2.0 unx       89 b- defN 23-Jul-27 16:03 morm/version.py
+-rw-r--r--  2.0 unx       89 b- defN 23-Jul-28 05:00 morm/version.py
 -rw-r--r--  2.0 unx       26 b- defN 21-Apr-08 08:46 morm/fields/__init__.py
 -rw-r--r--  2.0 unx     1968 b- defN 21-Apr-08 08:54 morm/fields/common.py
 -rw-r--r--  2.0 unx    15604 b- defN 21-Jul-21 14:32 morm/fields/field.py
--rwxr-xr-x  2.0 unx     9195 b- defN 23-Jul-27 16:02 morm-1.5.1.data/scripts/init_fap
--rwxr-xr-x  2.0 unx       78 b- defN 23-Jul-27 16:04 morm-1.5.1.data/scripts/morm_admin
--rw-rw-r--  2.0 unx     1703 b- defN 23-Jul-27 16:04 morm-1.5.1.dist-info/LICENSE
--rw-r--r--  2.0 unx    13905 b- defN 23-Jul-27 16:04 morm-1.5.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jul-27 16:04 morm-1.5.1.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Jul-27 16:04 morm-1.5.1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1701 b- defN 23-Jul-27 16:04 morm-1.5.1.dist-info/RECORD
-23 files, 135122 bytes uncompressed, 40549 bytes compressed:  70.0%
+-rwxr-xr-x  2.0 unx     9152 b- defN 23-Jul-28 04:53 morm-1.5.2.data/scripts/init_fap
+-rwxr-xr-x  2.0 unx       78 b- defN 23-Jul-28 05:07 morm-1.5.2.data/scripts/morm_admin
+-rw-rw-r--  2.0 unx     1703 b- defN 23-Jul-28 05:07 morm-1.5.2.dist-info/LICENSE
+-rw-r--r--  2.0 unx    14152 b- defN 23-Jul-28 05:07 morm-1.5.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-28 05:07 morm-1.5.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jul-28 05:07 morm-1.5.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1701 b- defN 23-Jul-28 05:07 morm-1.5.2.dist-info/RECORD
+23 files, 136622 bytes uncompressed, 41003 bytes compressed:  70.0%
```

## zipnote {}

```diff
@@ -42,29 +42,29 @@
 
 Filename: morm/fields/common.py
 Comment: 
 
 Filename: morm/fields/field.py
 Comment: 
 
-Filename: morm-1.5.1.data/scripts/init_fap
+Filename: morm-1.5.2.data/scripts/init_fap
 Comment: 
 
-Filename: morm-1.5.1.data/scripts/morm_admin
+Filename: morm-1.5.2.data/scripts/morm_admin
 Comment: 
 
-Filename: morm-1.5.1.dist-info/LICENSE
+Filename: morm-1.5.2.dist-info/LICENSE
 Comment: 
 
-Filename: morm-1.5.1.dist-info/METADATA
+Filename: morm-1.5.2.dist-info/METADATA
 Comment: 
 
-Filename: morm-1.5.1.dist-info/WHEEL
+Filename: morm-1.5.2.dist-info/WHEEL
 Comment: 
 
-Filename: morm-1.5.1.dist-info/top_level.txt
+Filename: morm-1.5.2.dist-info/top_level.txt
 Comment: 
 
-Filename: morm-1.5.1.dist-info/RECORD
+Filename: morm-1.5.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## morm/admin.py

```diff
@@ -3,40 +3,72 @@
 
 __author__ = 'Md Jahidul Hamid <jahidulhamid@yahoo.com>'
 __copyright__ = 'Copyright © Md Jahidul Hamid <https://github.com/neurobin/>'
 __license__ = '[BSD](http://www.opensource.org/licenses/bsd-license.php)'
 __version__ = '0.0.2'
 
 
-import sys
+import sys, os
 import argparse
 from typing import Union, List, Dict, Any
 import logging
 
 from morm.db import DB
 from morm.migration import Migration
 
 log = logging.getLogger('morm:admin')
 log.setLevel(logging.INFO)
 
-def init_project(py_path):
+def init_project(py_path, venv):
+    APP_NAME = py_path.upper()
+    HOME = os.path.expanduser('~')
     files = {
-        '_morm_config_.py': f"""
+        '_morm_config_.py': """
+import os
 from morm.db import Pool
 
+APP_NAME = '"""+APP_NAME+"""'
+
 DB_POOL = Pool(
-    dsn='postgres://',
-    host='localhost',
-    port=5432,
-    user='user',
-    password='pass',
-    database='db_name',
-    min_size=10,
-    max_size=90,
+    dsn=os.getenv(f'{APP_NAME}_DB_DSN', 'postgres://'),
+    host=os.getenv(f'{APP_NAME}_DB_HOST', 'localhost'),
+    port=int(os.getenv(f'{APP_NAME}_DB_PORT', 5432)),
+    user=os.environ[f'{APP_NAME}_DB_USER'],
+    password=os.environ[f'{APP_NAME}_DB_PASS'],
+    database=os.environ[f'{APP_NAME}_DB_DATABASE'],
+    min_size=int(os.getenv(f'{APP_NAME}_DB_POOL_MIN_SIZE', 10)),
+    max_size=int(os.getenv(f'{APP_NAME}_DB_POOL_MAX_SIZE', 90)),
 )
+
+""",
+        f'{HOME}/.env_{APP_NAME}': f"""#!/bin/sh
+# copy this file to a secure place and update the path in the vact file.
+if [ "${APP_NAME}_ENV" = live ]; then
+    {APP_NAME}_DB_DSN='postgres://'
+    {APP_NAME}_DB_HOST='localhost'
+    {APP_NAME}_DB_PORT=5432
+    {APP_NAME}_DB_USER='db_user_name'
+    {APP_NAME}_DB_PASS='db_user_pass'
+    {APP_NAME}_DB_DATABASE='db_name'
+    {APP_NAME}_DB_POOL_MIN_SIZE=10
+    {APP_NAME}_DB_POOL_MAX_SIZE=90
+else
+    {APP_NAME}_DB_DSN='postgres://'
+    {APP_NAME}_DB_HOST='localhost'
+    {APP_NAME}_DB_PORT=5432
+    {APP_NAME}_DB_USER='db_user_name'
+    {APP_NAME}_DB_PASS='db_user_pass'
+    {APP_NAME}_DB_DATABASE='db_name'
+    {APP_NAME}_DB_POOL_MIN_SIZE=10
+    {APP_NAME}_DB_POOL_MAX_SIZE=90
+fi
+""",
+        'vact': f"""
+. {HOME}/.env_{APP_NAME}
+. {venv}/bin/activate
 """,
         'mgr.py': f"""
 import os
 from morm.migration import migration_manager
 from _morm_config_ import DB_POOL
 
 from {py_path}.core.models.user import User
@@ -62,16 +94,17 @@
 
 def main():
     parser = argparse.ArgumentParser()
     parser.add_argument("cmd", type=str,
                         help="""Command:
                         init: Initialize a project""")
     parser.add_argument("-p","--py-path", type=str, default='app',
-                        help="""Command:
-                        init -n app: Initialize a project named app""")
+                        help="""application name or python dotted path""")
+    parser.add_argument("-v","--venv", type=str, default='.venv',
+                        help="""Venv path""")
 
     args = parser.parse_args()
 
     if args.cmd == 'init':
-        return init_project(args.py_path)
+        return init_project(args.py_path, args.venv)
     else:
         raise ValueError(f"E: Invalid command: {args.cmd}")
```

## morm/version.py

```diff
@@ -1,3 +1,3 @@
 
-__version_info__ = (1, 5, 1)
+__version_info__ = (1, 5, 2)
 __version__ = '.'.join([str(x) for x in __version_info__])
```

## Comparing `morm-1.5.1.data/scripts/init_fap` & `morm-1.5.2.data/scripts/init_fap`

 * *Files 1% similar despite different names*

```diff
@@ -78,15 +78,15 @@
     email = EmailField(max_length=255, unique=True)
     password = Field('varchar(255)')
     profession = Field('varchar(255)', default='Unknown')
 "
     ["$root/core/settings.py"]="
 import os
 
-DEBUG = True if os.environ.get('DEBUG', 'true').lower() == 'true' else False
+DEBUG = True if os.getenv('DEBUG', 'true').lower() == 'true' else False
 "
     ["$root/v1/routers/__init__.py"]="
 '''Make a single APIRouter that contains all the routers.
 
 We will automatically include all routers in this directory
 sequentially. You should give sequential names to your router modules
 such as route_0001_admin.py, route_0002_user.py, etc...
@@ -197,15 +197,15 @@
 *.html
 *.old
 *.log
 .vscode/
 .idea/
 /.venv/
 /venv/
-/.env
+/.env*
 .pytest_cache
 /htmlcov
 /site/
 .coverage
 coverage.xml
 Pipfile.lock
 .ipynb_checkpoints
@@ -313,22 +313,18 @@
         proxy_pass http://unix:/tmp/.$app_py_path.sock;
     }
 
 }
 
 "
     ["run"]="#!/bin/bash
+. vact
 uvicorn $app_py_path.main:app --reload --loop asyncio
 "
-    ["vact"]="
-. .env
-. .venv/bin/activate
-"
     ["mgr"]="#!/bin/bash
-
 . vact
 python mgr.py \${1+\"\$@\"}
 "
     ["$app_py_path.service"]="[Unit]
 Description=$app_py_path daemon
 After=network.target
```

## Comparing `morm-1.5.1.dist-info/LICENSE` & `morm-1.5.2.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `morm-1.5.1.dist-info/METADATA` & `morm-1.5.2.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: morm
-Version: 1.5.1
+Version: 1.5.2
 Summary: A minimal asynchronous database object relational mapper
 Home-page: https://github.com/neurobin/python-morm
 Author: Md. Jahidul Hamid
 Author-email: jahidulhamid@yahoo.com
 License: BSD
 Keywords: async,orm,postgresql
 Classifier: Development Status :: 5 - Production/Stable
@@ -427,11 +427,17 @@
 ├── run
 └── vact
 ```
 
 You can run the app with `./run` or `./gunicorn.sh` or
 
 ```bash
+. vact # activate venv with environment
 uvicorn app.main:app --reload --loop asyncio
 ```
 
-To run as a service with `systemctl start app`, copy the app.service to `/etc/systemd/system`
+To run as a service with `systemctl start app`, copy the **app.service** to `/etc/systemd/system`
+
+**Notes:**
+
+* You can setup your venv path in the `vact` file. To activate the venv with all the environment vars, just run `. vact`.
+* An environment file `.env_APP` is created in your home directory.
```

